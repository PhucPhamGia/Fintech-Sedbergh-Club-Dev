# Database Schema Documentation Index

**Location**: `docs/00_ARCHITECTURE_FOUNDATION/01_DATABASE/`

**Tier**: A (Architecture Foundation - IMMUTABLE)

**Status**: ‚úÖ Complete

---

## **Files in This Folder**

| File | Purpose | Type |
|------|---------|------|
| `00_01_01_btcdatadb_kline_data.sql` | Kline data table (OHLCV + MA20/MA50) | Table Schema |
| `00_01_02_tbl_coin_cryptocurrency_list.sql` | Cryptocurrency reference list (BTC, ETH, SOL, BNB) | Table Schema |
| `00_01_03_tbl_auth_user_authentication.sql` | User authentication & login table | Table Schema |
| `stored_procedures/00_01_04_ma20_stored_procedure.sql` | MA20 calculation stored procedure | Procedure |

---

## **Quick Reference**

### **btcdatadb** (Kline Data)
- **Purpose**: Store Binance 12h kline data for all cryptocurrencies
- **Primary Key**: `id` (auto-increment)
- **Foreign Key**: `id_coin` ‚Üí `tbl_coin.id_coin`
- **Unique Composite**: `(id_coin, date, open_time)` for duplicate prevention
- **Key Fields**: `open_time`, `open_price`, `high_price`, `low_price`, `close_price`, `volume`, `ma20`, `ma50`
- **Records**: ~1,737 klines (as of Jan 18, 2026)

### **tbl_coin** (Cryptocurrency List)
- **Purpose**: Reference table for supported cryptocurrencies
- **Primary Key**: `id_coin` (auto-increment)
- **Supported Coins**: BTC, ETH, SOL, BNB (4 coins)
- **Key Field**: `coinname` (e.g., "BTCUSDT")

### **auth** (User Authentication)
- **Purpose**: Store user accounts for login/logout
- **Primary Key**: `id` (auto-increment)
- **Key Fields**: `username`, `email`, `password` (hashed), `verified`, `remember_selector`
- **Registered Users**: 3 users (as of Jan 18, 2026)

### **ma20 Stored Procedure**
- **Purpose**: Calculate 20-period moving average (MA20)
- **Parameter**: `desired_coin` (VARCHAR 50) - coin symbol
- **Returns**: `ma20` (DOUBLE) - average of 50 most recent close_price values
- **Note**: ‚ö†Ô∏è Uses `coin_id` parameter (verify compatibility with `id_coin` field)

---

## **Import Order (When Restoring Database)**

1. Create `tbl_coin` first (reference data)
2. Create `btcdatadb` (depends on tbl_coin)
3. Create `auth` (independent)
4. Create `ma20` stored procedure (depends on btcdatadb)

---

## **Related Documentation**

- üìÑ `docs/00_ARCHITECTURE_FOUNDATION/00_00_docs_storage_architecture_lawbook.md` - Documentation rules
- üìÑ `docs/PROJECT_INSTRUCTIONS.md` - Project overview & sector details
- üìÑ `.copilot-instructions.md` - Database reference section
- üìÅ `docs/01_ENGINE_DOMAIN/01_BINANCE_API_ENGINE/` - Binance import logic
- üìÅ `docs/01_ENGINE_DOMAIN/04_STORAGE_ENGINE/` - Database operations

---

**Last Updated**: January 18, 2026  
**Status**: ‚úÖ COMPLETE & LOCKED